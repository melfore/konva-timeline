"use strict";(self.webpackChunk_melfore_konva_timeline=self.webpackChunk_melfore_konva_timeline||[]).push([[676],{"./src/utils/stories/decorators/Timeline.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function cov_1z8ww8knb4(){var path="/home/runner/work/konva-timeline/konva-timeline/src/utils/stories/decorators/Timeline.tsx",global=new Function("return this")(),gcv="__coverage__",coverageData={path:"/home/runner/work/konva-timeline/konva-timeline/src/utils/stories/decorators/Timeline.tsx",statementMap:{0:{start:{line:2,column:26},end:{line:39,column:1}},1:{start:{line:10,column:28},end:{line:10,column:57}},2:{start:{line:11,column:2},end:{line:16,column:22}},3:{start:{line:12,column:4},end:{line:14,column:5}},4:{start:{line:13,column:6},end:{line:13,column:36}},5:{start:{line:17,column:23},end:{line:20,column:28}},6:{start:{line:18,column:4},end:{line:18,column:55}},7:{start:{line:19,column:4},end:{line:19,column:105}},8:{start:{line:19,column:26},end:{line:19,column:103}},9:{start:{line:19,column:55},end:{line:19,column:102}},10:{start:{line:21,column:19},end:{line:30,column:24}},11:{start:{line:22,column:4},end:{line:24,column:5}},12:{start:{line:23,column:6},end:{line:23,column:13}},13:{start:{line:25,column:4},end:{line:25,column:49}},14:{start:{line:27,column:4},end:{line:29,column:8}},15:{start:{line:27,column:28},end:{line:29,column:6}},16:{start:{line:31,column:2},end:{line:38,column:5}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:26},end:{line:2,column:27}},loc:{start:{line:9,column:6},end:{line:39,column:1}},line:9},1:{name:"(anonymous_1)",decl:{start:{line:11,column:12},end:{line:11,column:13}},loc:{start:{line:11,column:18},end:{line:16,column:3}},line:11},2:{name:"(anonymous_2)",decl:{start:{line:17,column:35},end:{line:17,column:36}},loc:{start:{line:17,column:43},end:{line:20,column:3}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:19,column:13},end:{line:19,column:14}},loc:{start:{line:19,column:26},end:{line:19,column:103}},line:19},4:{name:"(anonymous_4)",decl:{start:{line:19,column:40},end:{line:19,column:41}},loc:{start:{line:19,column:55},end:{line:19,column:102}},line:19},5:{name:"(anonymous_5)",decl:{start:{line:21,column:31},end:{line:21,column:32}},loc:{start:{line:21,column:41},end:{line:30,column:3}},line:21},6:{name:"(anonymous_6)",decl:{start:{line:27,column:19},end:{line:27,column:20}},loc:{start:{line:27,column:28},end:{line:29,column:6}},line:27}},branchMap:{0:{loc:{start:{line:10,column:37},end:{line:10,column:56}},type:"binary-expr",locations:[{start:{line:10,column:37},end:{line:10,column:50}},{start:{line:10,column:54},end:{line:10,column:56}}],line:10},1:{loc:{start:{line:12,column:4},end:{line:14,column:5}},type:"if",locations:[{start:{line:12,column:4},end:{line:14,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:12},2:{loc:{start:{line:13,column:15},end:{line:13,column:34}},type:"binary-expr",locations:[{start:{line:13,column:15},end:{line:13,column:28}},{start:{line:13,column:32},end:{line:13,column:34}}],line:13},3:{loc:{start:{line:18,column:4},end:{line:18,column:54}},type:"binary-expr",locations:[{start:{line:18,column:4},end:{line:18,column:24}},{start:{line:18,column:28},end:{line:18,column:54}}],line:18},4:{loc:{start:{line:19,column:55},end:{line:19,column:102}},type:"cond-expr",locations:[{start:{line:19,column:84},end:{line:19,column:88}},{start:{line:19,column:91},end:{line:19,column:102}}],line:19},5:{loc:{start:{line:22,column:4},end:{line:24,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:24,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:22},6:{loc:{start:{line:22,column:8},end:{line:22,column:33}},type:"binary-expr",locations:[{start:{line:22,column:8},end:{line:22,column:15}},{start:{line:22,column:19},end:{line:22,column:33}}],line:22},7:{loc:{start:{line:25,column:4},end:{line:25,column:48}},type:"binary-expr",locations:[{start:{line:25,column:4},end:{line:25,column:20}},{start:{line:25,column:24},end:{line:25,column:48}}],line:25}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0]},inputSourceMap:{version:3,file:void 0,names:["useCallback","useEffect","useState","TimelineDecorator","Story","args","onErrors","externalOnErrors","onTaskChange","externalOnTaskChange","tasks","externalTasks","setTasks","task","prevTasks","map","currentTask","id","errors","length","forEach","error","console","level"],sourceRoot:void 0,sources:["/home/runner/work/konva-timeline/konva-timeline/src/utils/stories/decorators/Timeline.tsx"],sourcesContent:['import { useCallback, useEffect, useState } from "react";\nimport { Decorator } from "@storybook/react";\n\nimport { KonvaTimelineError, TaskData } from "../../..";\nimport { TimelineProviderProps } from "../../../timeline/TimelineContext";\n\nconst TimelineDecorator: Decorator<TimelineProviderProps> = (\n  Story,\n  { args: { onErrors: externalOnErrors, onTaskChange: externalOnTaskChange, tasks: externalTasks, ...args } }\n) => {\n  const [tasks, setTasks] = useState<TaskData[]>(externalTasks || []);\n\n  useEffect(() => {\n    if (externalTasks !== tasks) {\n      setTasks(externalTasks || []);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [externalTasks]);\n\n  const onTaskChange = useCallback(\n    (task: TaskData) => {\n      externalOnTaskChange && externalOnTaskChange(task);\n      setTasks((prevTasks) => prevTasks.map((currentTask) => (currentTask.id === task.id ? task : currentTask)));\n    },\n    [externalOnTaskChange]\n  );\n\n  const onErrors = useCallback(\n    (errors: KonvaTimelineError[]) => {\n      if (!errors || !errors.length) {\n        return;\n      }\n\n      externalOnErrors && externalOnErrors(errors);\n      // eslint-disable-next-line no-console\n      errors.forEach((error) => console[error.level]({ ...error }));\n    },\n    [externalOnErrors]\n  );\n\n  return Story({\n    args: {\n      ...args,\n      onErrors,\n      onTaskChange,\n      tasks,\n    },\n  });\n};\n\nexport default TimelineDecorator;\n'],mappings:"AAAA,SAASA,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAMxD,MAAMC,iBAAmD,GAAGA,CAC1DC,KAAK,EACL;EAAEC,IAAI,EAAE;IAAEC,QAAQ,EAAEC,gBAAgB;IAAEC,YAAY,EAAEC,oBAAoB;IAAEC,KAAK,EAAEC,aAAa;IAAE,GAAGN;EAAK;AAAE,CAAC,KACxG;EACH,MAAM,CAACK,KAAK,EAAEE,QAAQ,CAAC,GAAGV,QAAQ,CAAaS,aAAa,IAAI,EAAE,CAAC;EAEnEV,SAAS,CAAC,MAAM;IACd,IAAIU,aAAa,KAAKD,KAAK,EAAE;MAC3BE,QAAQ,CAACD,aAAa,IAAI,EAAE,CAAC;IAC/B;IACA;EACF,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;EAEnB,MAAMH,YAAY,GAAGR,WAAW,CAC7Ba,IAAc,IAAK;IAClBJ,oBAAoB,IAAIA,oBAAoB,CAACI,IAAI,CAAC;IAClDD,QAAQ,CAAEE,SAAS,IAAKA,SAAS,CAACC,GAAG,CAAEC,WAAW,IAAMA,WAAW,CAACC,EAAE,KAAKJ,IAAI,CAACI,EAAE,GAAGJ,IAAI,GAAGG,WAAY,CAAC,CAAC;EAC5G,CAAC,EACD,CAACP,oBAAoB,CACvB,CAAC;EAED,MAAMH,QAAQ,GAAGN,WAAW,CACzBkB,MAA4B,IAAK;IAChC,IAAI,CAACA,MAAM,IAAI,CAACA,MAAM,CAACC,MAAM,EAAE;MAC7B;IACF;IAEAZ,gBAAgB,IAAIA,gBAAgB,CAACW,MAAM,CAAC;IAC5C;IACAA,MAAM,CAACE,OAAO,CAAEC,KAAK,IAAKC,OAAO,CAACD,KAAK,CAACE,KAAK,CAAC,CAAC;MAAE,GAAGF;IAAM,CAAC,CAAC,CAAC;EAC/D,CAAC,EACD,CAACd,gBAAgB,CACnB,CAAC;EAED,OAAOH,KAAK,CAAC;IACXC,IAAI,EAAE;MACJ,GAAGA,IAAI;MACPC,QAAQ;MACRE,YAAY;MACZE;IACF;EACF,CAAC,CAAC;AACJ,CAAC;AAED,eAAeP,iBAAiB",ignoreList:[]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"76500f7646e64d84e498c9c832daa8c6c4700aab"},coverage=global[gcv]||(global[gcv]={});coverage[path]&&"76500f7646e64d84e498c9c832daa8c6c4700aab"===coverage[path].hash||(coverage[path]=coverageData);var actualCoverage=coverage[path];return cov_1z8ww8knb4=function(){return actualCoverage},actualCoverage}cov_1z8ww8knb4(),cov_1z8ww8knb4().s[0]++;__webpack_exports__.A=(Story,{args:{onErrors:externalOnErrors,onTaskChange:externalOnTaskChange,tasks:externalTasks,...args}})=>{cov_1z8ww8knb4().f[0]++;const[tasks,setTasks]=(cov_1z8ww8knb4().s[1]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((cov_1z8ww8knb4().b[0][0]++,externalTasks||(cov_1z8ww8knb4().b[0][1]++,[]))));cov_1z8ww8knb4().s[2]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{cov_1z8ww8knb4().f[1]++,cov_1z8ww8knb4().s[3]++,externalTasks!==tasks?(cov_1z8ww8knb4().b[1][0]++,cov_1z8ww8knb4().s[4]++,setTasks((cov_1z8ww8knb4().b[2][0]++,externalTasks||(cov_1z8ww8knb4().b[2][1]++,[])))):cov_1z8ww8knb4().b[1][1]++}),[externalTasks]);const onTaskChange=(cov_1z8ww8knb4().s[5]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((task=>{cov_1z8ww8knb4().f[2]++,cov_1z8ww8knb4().s[6]++,cov_1z8ww8knb4().b[3][0]++,externalOnTaskChange&&(cov_1z8ww8knb4().b[3][1]++,externalOnTaskChange(task)),cov_1z8ww8knb4().s[7]++,setTasks((prevTasks=>(cov_1z8ww8knb4().f[3]++,cov_1z8ww8knb4().s[8]++,prevTasks.map((currentTask=>(cov_1z8ww8knb4().f[4]++,cov_1z8ww8knb4().s[9]++,currentTask.id===task.id?(cov_1z8ww8knb4().b[4][0]++,task):(cov_1z8ww8knb4().b[4][1]++,currentTask)))))))}),[externalOnTaskChange])),onErrors=(cov_1z8ww8knb4().s[10]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((errors=>{if(cov_1z8ww8knb4().f[5]++,cov_1z8ww8knb4().s[11]++,cov_1z8ww8knb4().b[6][0]++,!errors||(cov_1z8ww8knb4().b[6][1]++,!errors.length))return cov_1z8ww8knb4().b[5][0]++,void cov_1z8ww8knb4().s[12]++;cov_1z8ww8knb4().b[5][1]++,cov_1z8ww8knb4().s[13]++,cov_1z8ww8knb4().b[7][0]++,externalOnErrors&&(cov_1z8ww8knb4().b[7][1]++,externalOnErrors(errors)),cov_1z8ww8knb4().s[14]++,errors.forEach((error=>(cov_1z8ww8knb4().f[6]++,cov_1z8ww8knb4().s[15]++,console[error.level]({...error}))))}),[externalOnErrors]));return cov_1z8ww8knb4().s[16]++,Story({args:{...args,onErrors:onErrors,onTaskChange:onTaskChange,tasks:tasks}})}},"./src/KonvaTimeline/scenario-yearly.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{YearlyReport:function(){return YearlyReport},__namedExportsOrder:function(){return __namedExportsOrder}});var _utils_stories_decorators_Timeline__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/stories/decorators/Timeline.tsx"),_utils_stories_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/stories/utils.ts");const meta={title:"Scenario/Yearly Report",component:__webpack_require__("./src/KonvaTimeline/index.tsx").A,decorators:[_utils_stories_decorators_Timeline__WEBPACK_IMPORTED_MODULE_0__.A],tags:["autodocs"],argTypes:{onTaskChange:{type:"function"}}};__webpack_exports__.default=meta;const yearlyStoryData=(0,_utils_stories_utils__WEBPACK_IMPORTED_MODULE_1__.Xk)({averageTaskDurationInMinutes:600,resourcesCount:20,tasksCount:3e3,timeRangeInDays:1825}),YearlyReport={args:{...yearlyStoryData,resolution:"1day",initialDateTime:yearlyStoryData.range.start,onAreaSelect:void 0}};YearlyReport.parameters={...YearlyReport.parameters,docs:{...YearlyReport.parameters?.docs,source:{originalSource:'{\n  args: {\n    ...yearlyStoryData,\n    resolution: "1day",\n    initialDateTime: yearlyStoryData.range.start,\n    onAreaSelect: undefined\n  }\n}',...YearlyReport.parameters?.docs?.source}}};const __namedExportsOrder=["YearlyReport"]}}]);